rebuild: clear ## Rebuild the project from scratch
	npm install
	npm run build
	npm --prefix cli install -g

build: ## Build the poject
	npm ci --workspaces
	npm run build

test: ## Run tests
	npm test --workspaces

clear: ## Reset the project, remove all artifacts
	rm -rf ./cli/node_modules
	rm -rf ./cli/dist
	rm -rf ./html-ui/node_modules
	rm -rf ./html-ui/dist

install: build ## Install the cli to the terminal
	npm --prefix cli install -g

watch: build ## Update html UI repeatedly for development purposes
	open .git-stats/report.html
	while true; do clear; make build; git-stats html out.jsonl; sleep 10; done

help: ## Autogenerated help for Makefile
	@grep -E '^[a-zA-Z_-]+:.*?## .*$$' $(MAKEFILE_LIST) | sort | awk 'BEGIN {FS = ":.*?## "}; {printf "\033[36m%-30s\033[0m %s\n", $$1, $$2}'

# Allows execute `make` without arguments to get a help
.DEFAULT_GOAL := help

# Forces GNUMake to run task any time it is been called.
.PHONY: *
